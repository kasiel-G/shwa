<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>English Learning Platform</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @keyframes slideIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .animate-slide-in { animation: slideIn 0.3s ease-out; }
  </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
  <div id="app" class="max-w-6xl mx-auto p-8"></div>

  <script>
    // ==================== CLASSES ====================
    
    // Classe de base pour toutes les le√ßons
    class Lesson {
      constructor(id, title, description, difficulty) {
        this.id = id;
        this.title = title;
        this.description = description;
        this.difficulty = difficulty;
        this.completed = false;
      }

      complete() {
        this.completed = true;
      }

      getDifficultyColor() {
        const colors = {
          'D√©butant': 'bg-green-500',
          'Interm√©diaire': 'bg-yellow-500',
          'Avanc√©': 'bg-red-500'
        };
        return colors[this.difficulty] || 'bg-gray-500';
      }
    }

    // Classe pour les le√ßons de vocabulaire
    class VocabularyLesson extends Lesson {
      constructor(id, title, description, difficulty, words) {
        super(id, title, description, difficulty);
        this.words = words;
        this.type = 'vocabulary';
      }

      getRandomWord() {
        return this.words[Math.floor(Math.random() * this.words.length)];
      }

      checkAnswer(english, french) {
        return this.words.some(w => 
          w.english.toLowerCase() === english.toLowerCase() && 
          w.french.toLowerCase() === french.toLowerCase()
        );
      }
    }

    // Classe pour les le√ßons de grammaire
    class GrammarLesson extends Lesson {
      constructor(id, title, description, difficulty, rules, exercises) {
        super(id, title, description, difficulty);
        this.rules = rules;
        this.exercises = exercises;
        this.type = 'grammar';
      }

      checkExercise(exerciseIndex, answer) {
        return this.exercises[exerciseIndex].answer === answer;
      }
    }

    // Classe pour les le√ßons de conversation
    class ConversationLesson extends Lesson {
      constructor(id, title, description, difficulty, dialogues) {
        super(id, title, description, difficulty);
        this.dialogues = dialogues;
        this.type = 'conversation';
      }

      getDialogueByIndex(index) {
        return this.dialogues[index] || null;
      }
    }

    // ==================== DONN√âES ====================
    
    const lessons = [
      new VocabularyLesson(
        1,
        "Les Salutations",
        "Apprenez les expressions de base pour saluer en anglais",
        "D√©butant",
        [
          { english: "Hello", french: "Bonjour", example: "Hello! How are you?" },
          { english: "Goodbye", french: "Au revoir", example: "Goodbye! See you later." },
          { english: "Thank you", french: "Merci", example: "Thank you very much!" },
          { english: "Please", french: "S'il vous pla√Æt", example: "Could you help me, please?" },
          { english: "Sorry", french: "D√©sol√©", example: "I'm sorry for being late." }
        ]
      ),
      new GrammarLesson(
        2,
        "Le Pr√©sent Simple",
        "Ma√Ætrisez la conjugaison du pr√©sent simple",
        "D√©butant",
        [
          { rule: "I/You/We/They + verbe", example: "I work every day." },
          { rule: "He/She/It + verbe + s", example: "She works in Paris." }
        ],
        [
          { 
            question: "She ___ to school every day.", 
            answer: "goes", 
            options: ["go", "goes", "going", "gone"] 
          },
          { 
            question: "They ___ English.", 
            answer: "speak", 
            options: ["speaks", "speak", "speaking", "spoke"] 
          }
        ]
      ),
      new VocabularyLesson(
        3,
        "Les Animaux",
        "Vocabulaire des animaux domestiques et sauvages",
        "D√©butant",
        [
          { english: "Dog", french: "Chien", example: "I have a dog." },
          { english: "Cat", french: "Chat", example: "The cat is sleeping." },
          { english: "Bird", french: "Oiseau", example: "A bird is singing." },
          { english: "Fish", french: "Poisson", example: "There are fish in the pond." },
          { english: "Lion", french: "Lion", example: "The lion is the king of the jungle." }
        ]
      ),
      new ConversationLesson(
        4,
        "Au Restaurant",
        "Apprenez √† commander au restaurant",
        "Interm√©diaire",
        [
          { speaker: "Serveur", text: "Good evening! Are you ready to order?", translation: "Bonsoir ! √ätes-vous pr√™t √† commander ?" },
          { speaker: "Client", text: "Yes, I'd like the chicken, please.", translation: "Oui, je voudrais le poulet, s'il vous pla√Æt." },
          { speaker: "Serveur", text: "Would you like anything to drink?", translation: "Souhaitez-vous quelque chose √† boire ?" },
          { speaker: "Client", text: "A glass of water, please.", translation: "Un verre d'eau, s'il vous pla√Æt." }
        ]
      )
    ];

    // ==================== APPLICATION ====================
    
    class EnglishLearningApp {
      constructor(containerId) {
        this.container = document.getElementById(containerId);
        this.selectedLesson = null;
        this.currentStep = 0;
        this.score = 0;
        this.userAnswer = '';
        this.feedback = null;
        
        this.render();
      }

      selectLesson(lesson) {
        this.selectedLesson = lesson;
        this.currentStep = 0;
        this.score = 0;
        this.userAnswer = '';
        this.feedback = null;
        this.render();
      }

      backToLessons() {
        this.selectedLesson = null;
        this.render();
      }

      submitAnswer() {
        if (!this.selectedLesson) return;

        if (this.selectedLesson.type === 'vocabulary') {
          const currentWord = this.selectedLesson.words[this.currentStep];
          if (this.userAnswer.toLowerCase() === currentWord.french.toLowerCase()) {
            this.feedback = { correct: true, message: 'Excellent !' };
            this.score++;
          } else {
            this.feedback = { correct: false, message: `La r√©ponse √©tait: ${currentWord.french}` };
          }
          this.render();
        }
      }

      submitGrammarAnswer(answer) {
        const isCorrect = this.selectedLesson.checkExercise(this.currentStep, answer);
        if (isCorrect) {
          this.feedback = { correct: true, message: 'Correct !' };
          this.score++;
        } else {
          this.feedback = { correct: false, message: `La bonne r√©ponse est: ${this.selectedLesson.exercises[this.currentStep].answer}` };
        }
        this.render();
      }

      nextStep() {
        const lesson = this.selectedLesson;
        const maxSteps = lesson.type === 'vocabulary' ? lesson.words.length :
                        lesson.type === 'grammar' ? lesson.exercises.length :
                        lesson.dialogues.length;

        if (this.currentStep < maxSteps - 1) {
          this.currentStep++;
          this.userAnswer = '';
          this.feedback = null;
          this.render();
        } else {
          lesson.complete();
          this.backToLessons();
        }
      }

      // ==================== RENDER ====================
      
      render() {
        this.container.innerHTML = this.selectedLesson 
          ? this.renderLesson() 
          : this.renderLessonList();
      }

      renderLessonList() {
        return `
          <header class="text-center mb-12 animate-slide-in">
            <h1 class="text-5xl font-bold text-indigo-900 mb-2 flex items-center justify-center gap-3">
              üìö English Learning Platform
            </h1>
            <p class="text-indigo-600 text-lg">Apprenez l'anglais avec des le√ßons structur√©es</p>
          </header>

          <div class="grid md:grid-cols-2 gap-6">
            ${lessons.map(lesson => `
              <div
                onclick="app.selectLesson(lessons[${lesson.id - 1}])"
                class="bg-white rounded-xl shadow-lg p-6 cursor-pointer hover:shadow-xl transition-all transform hover:-translate-y-1 animate-slide-in"
              >
                <div class="flex justify-between items-start mb-4">
                  <h3 class="text-2xl font-bold text-gray-800">${lesson.title}</h3>
                  ${lesson.completed ? '<span class="text-yellow-500 text-2xl">üèÜ</span>' : ''}
                </div>
                <p class="text-gray-600 mb-4">${lesson.description}</p>
                <div class="flex items-center gap-3">
                  <span class="px-3 py-1 rounded-full text-white text-sm ${lesson.getDifficultyColor()}">
                    ${lesson.difficulty}
                  </span>
                  <span class="px-3 py-1 rounded-full bg-indigo-100 text-indigo-700 text-sm font-medium">
                    ${lesson.type === 'vocabulary' ? 'üìö Vocabulaire' : 
                      lesson.type === 'grammar' ? '‚úçÔ∏è Grammaire' : 'üí¨ Conversation'}
                  </span>
                </div>
              </div>
            `).join('')}
          </div>
        `;
      }

      renderLesson() {
        const lesson = this.selectedLesson;
        const maxSteps = lesson.type === 'vocabulary' ? lesson.words.length :
                        lesson.type === 'grammar' ? lesson.exercises.length :
                        lesson.dialogues.length;

        return `
          <div class="bg-white rounded-xl shadow-xl p-8 animate-slide-in">
            <div class="mb-6">
              <button
                onclick="app.backToLessons()"
                class="text-indigo-600 hover:text-indigo-800 mb-4 font-medium"
              >
                ‚Üê Retour aux le√ßons
              </button>
              <h2 class="text-3xl font-bold text-gray-800 mb-2">${lesson.title}</h2>
              <div class="flex items-center gap-4">
                <span class="text-gray-600 font-medium">Score: ${this.score}</span>
                <span class="text-gray-600">
                  Progression: ${this.currentStep + 1} / ${maxSteps}
                </span>
              </div>
            </div>

            ${lesson.type === 'vocabulary' ? this.renderVocabulary() :
              lesson.type === 'grammar' ? this.renderGrammar() :
              this.renderConversation()}
          </div>
        `;
      }

      renderVocabulary() {
        const word = this.selectedLesson.words[this.currentStep];
        
        return `
          <div class="space-y-6">
            <div class="bg-indigo-50 p-6 rounded-lg">
              <p class="text-3xl font-bold text-indigo-900 mb-2">${word.english}</p>
              <p class="text-gray-600 italic">"${word.example}"</p>
            </div>

            <div>
              <label class="block text-gray-700 mb-2 font-medium">
                Quelle est la traduction en fran√ßais ?
              </label>
              <input
                id="userAnswerInput"
                type="text"
                value="${this.userAnswer}"
                oninput="app.userAnswer = this.value"
                onkeypress="if(event.key === 'Enter' && !app.feedback) app.submitAnswer()"
                class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-indigo-500 focus:outline-none"
                placeholder="Entrez votre r√©ponse..."
                ${this.feedback ? 'disabled' : ''}
              />
            </div>

            ${this.feedback ? `
              <div class="p-4 rounded-lg flex items-center gap-3 ${
                this.feedback.correct ? 'bg-green-50 text-green-800' : 'bg-red-50 text-red-800'
              }">
                <span class="text-2xl">${this.feedback.correct ? '‚úì' : '‚úó'}</span>
                <span class="font-medium">${this.feedback.message}</span>
              </div>
            ` : ''}

            <div class="flex gap-3">
              ${!this.feedback ? `
                <button
                  onclick="app.submitAnswer()"
                  class="flex-1 bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition-colors font-medium"
                >
                  V√©rifier
                </button>
              ` : `
                <button
                  onclick="app.nextStep()"
                  class="flex-1 bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors font-medium"
                >
                  ${this.currentStep < this.selectedLesson.words.length - 1 ? 'Suivant' : 'Terminer'}
                </button>
              `}
            </div>
          </div>
        `;
      }

      renderGrammar() {
        const lesson = this.selectedLesson;
        const exercise = lesson.exercises[this.currentStep];
        
        return `
          <div class="space-y-6">
            <div class="bg-yellow-50 p-6 rounded-lg">
              <h3 class="font-bold text-lg mb-2">üìñ R√®gles:</h3>
              ${lesson.rules.map(rule => `
                <div class="mb-2">
                  <p class="text-gray-800">‚Ä¢ ${rule.rule}</p>
                  <p class="text-gray-600 italic ml-4">Ex: ${rule.example}</p>
                </div>
              `).join('')}
            </div>

            <div class="bg-indigo-50 p-6 rounded-lg">
              <p class="text-xl font-medium text-gray-800 mb-4">${exercise.question}</p>
              <div class="grid grid-cols-2 gap-3">
                ${exercise.options.map(option => `
                  <button
                    onclick="app.submitGrammarAnswer('${option}')"
                    ${this.feedback ? 'disabled' : ''}
                    class="p-3 bg-white border-2 border-indigo-300 rounded-lg hover:bg-indigo-100 transition-colors disabled:opacity-50 font-medium"
                  >
                    ${option}
                  </button>
                `).join('')}
              </div>
            </div>

            ${this.feedback ? `
              <div class="p-4 rounded-lg flex items-center gap-3 ${
                this.feedback.correct ? 'bg-green-50 text-green-800' : 'bg-red-50 text-red-800'
              }">
                <span class="text-2xl">${this.feedback.correct ? '‚úì' : '‚úó'}</span>
                <span class="font-medium">${this.feedback.message}</span>
              </div>

              <button
                onclick="app.nextStep()"
                class="w-full bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors font-medium"
              >
                ${this.currentStep < lesson.exercises.length - 1 ? 'Suivant' : 'Terminer'}
              </button>
            ` : ''}
          </div>
        `;
      }

      renderConversation() {
        const dialogue = this.selectedLesson.dialogues[this.currentStep];
        
        return `
          <div class="space-y-6">
            <div class="bg-gradient-to-r from-purple-50 to-pink-50 p-6 rounded-lg">
              <div class="mb-4">
                <span class="font-bold text-purple-900 text-lg">${dialogue.speaker}:</span>
              </div>
              <p class="text-2xl text-gray-800 mb-3">${dialogue.text}</p>
              <p class="text-gray-600 italic">‚Üí ${dialogue.translation}</p>
            </div>

            <button
              onclick="app.nextStep()"
              class="w-full bg-purple-600 text-white px-6 py-3 rounded-lg hover:bg-purple-700 transition-colors font-medium"
            >
              ${this.currentStep < this.selectedLesson.dialogues.length - 1 ? 'Suivant' : 'Terminer'}
            </button>
          </div>
        `;
      }
    }

    // ==================== INITIALISATION ====================
    
    const app = new EnglishLearningApp('app');
  </script>
</body>
</html>